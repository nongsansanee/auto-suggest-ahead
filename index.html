<!DOCTYPE html>
<html lang="th-TH">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Auto Suggest Ahead WTF!!!</title>
</head>
<body>
    <div class="container">
        <div class="col-sm-12 col-lg-4">
            <label>ค้นหาชื่อจังหวัด/อำเภอ/ตำบล:</label>
            <input type="text" id="find-place" class="form-control">
        </div>

        <div>  
          <ul class="list-group">    
          </ul>
        </div>
    </div>
<script>
const citiesEndpoint = "https://gist.githubusercontent.com/koramit/594b1b217cf6b5d1bf084fa27de09b8d/raw/5f73f96dbad9aac88951c1e1a2c6804df3487a9b/thai-subDistricts.json";
const cities = [];
fetch(citiesEndpoint)
    .then(blob => blob.json())
    .then(data => cities.push(...data));

    function searchPlace(){



            const wordFind = document.getElementById("find-place").value;

            if(wordFind.length < 2){
                return;
            }

            const ul = document.querySelector(".list-group");
            ul.innerHTML = ""
            // console.log(wordFind);

            let resultOfFind = cities.filter(function(place){
                //console.log(wordFind);
                    if(place.district.indexOf(wordFind)!== -1 || place.amphoe.indexOf(wordFind)!== -1 || place.province.indexOf(wordFind)!== -1){
                        return true;
                    }
        
           
        });
        // console.table(resultOfFind);
       
           resultOfFind.forEach((item,index)=>{
                  //console.log(item.join("-"));
                // //console.log(item);
                 const label = document.createTextNode('ตำบล'+item.district+'>>อำเภอ'+item.amphoe+'>>จังหวัด'+item.province+'>>รหัสไปรษณีย์-'+item.zipcode+'>>รหัสCCAATT_CODE-'+item.district_code);
                 const li = document.createElement("LI");
                 li.appendChild(label);
                 ul.appendChild(li);
           });
        //    $data = resultOfFind.map((item) => {
        //         return item.district + ' ' + item.amphoe + ' ' + item.province + ' ' + item.zipcode
        //    });
        //    console.log($data);
         
        
    };

 

    document.getElementById("find-place").addEventListener("input",searchPlace);

   
</script>
</body>
</html>
